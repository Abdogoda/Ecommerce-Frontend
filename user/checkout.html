<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Checkout - E-Commerce</title>

    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css"
      rel="stylesheet"
    />
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>

    <!-- User Styles -->
    <link rel="stylesheet" href="../assets/css/user/styles.css" />

    <!-- Tailwind Configuration -->
    <script src="../assets/js/user/tailwind-config.js"></script>
  </head>
  <body class="bg-gray-900 text-white">
    <!-- Header -->
    <header
      class="bg-gray-800/95 backdrop-blur-sm py-6 px-6 flex justify-between items-center flex-wrap gap-3 animate-fade-in-down shadow-2xl sticky top-0 z-50"
    >
      <h1 class="text-2xl font-bold animate-fade-in-left">
        <a
          href="../user/home.html"
          class="hover:text-blue-400 transition-colors duration-300"
        >
          <i class="fas fa-store mr-2 text-blue-400"></i>E-Commerce
        </a>
      </h1>
      <nav class="animate-fade-in-right">
        <ul class="flex space-x-6 items-center">
          <li class="animate-fade-in-up delay-100">
            <a
              href="../user/home.html"
              class="hover:text-blue-400 transition-all duration-300 relative group"
            >
              <span>Home</span>
              <span
                class="absolute -bottom-1 left-0 w-0 h-0.5 bg-blue-400 transition-all duration-300 group-hover:w-full"
              ></span>
            </a>
          </li>
          <li class="animate-fade-in-up delay-200">
            <a
              href="../user/products.html"
              class="hover:text-blue-400 transition-all duration-300 relative group"
            >
              <span>Shop</span>
              <span
                class="absolute -bottom-1 left-0 w-0 h-0.5 bg-blue-400 transition-all duration-300 group-hover:w-full"
              ></span>
            </a>
          </li>
          <li class="relative animate-fade-in-up delay-300">
            <a
              href="../user/cart.html"
              class="hover:text-blue-400 transition-all duration-300 hover:scale-105 transform"
            >
              <i class="fa fa-shopping-cart text-lg"></i>
              <span
                id="cart-badge"
                class="w-5 h-5 absolute -top-2 -right-2 bg-red-500 text-sm text-white p-1 rounded-full flex items-center justify-center animate-pulse"
                >2</span
              >
            </a>
          </li>
          <!-- User Profile Link -->
          <li class="animate-fade-in-up delay-700">
            <a
              href="../user/profile.html"
              class="hover:text-blue-400 transition-all duration-300 hover:scale-105 transform"
              ><i class="fa fa-user text-lg"></i
            ></a>
          </li>
          <!-- Logout Button -->
          <li class="animate-fade-in-up delay-700">
            <button
              type="button"
              class="bg-red-600 text-sm text-white px-4 py-2 rounded-lg hover:bg-red-700 hover:shadow-lg hover:shadow-red-500/50 transition-all duration-300 hover:scale-105 transform"
              onclick="logout()"
            >
              <i class="fas fa-sign-out-alt mr-1"></i>Logout
            </button>
          </li>
        </ul>
      </nav>
    </header>

    <!-- Main Content -->
    <section class="py-16 px-6 bg-gray-900 min-h-screen">
      <div class="max-w-7xl mx-auto">
        <!-- Page Header -->
        <div class="text-center mb-12 animate-fade-in-up">
          <h1 class="text-5xl font-bold text-white mb-4">
            <i class="fas fa-credit-card mr-4 text-green-400"></i>
            <span
              class="bg-gradient-to-r from-green-400 to-blue-500 bg-clip-text text-transparent"
            >
              Checkout
            </span>
          </h1>
          <div
            class="w-24 h-1 bg-gradient-to-r from-green-400 to-blue-500 mx-auto mt-4 rounded-full"
          ></div>
        </div>

        <!-- Progress Steps -->
        <div class="mb-12 animate-fade-in-up delay-200">
          <div
            class="bg-gray-800/50 backdrop-blur-sm rounded-2xl p-6 border border-gray-700/50"
          >
            <div class="flex items-center justify-between">
              <div class="flex items-center space-x-4">
                <div
                  class="w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center text-white font-bold"
                >
                  <i class="fas fa-shopping-cart"></i>
                </div>
                <span class="text-blue-400 font-semibold">Cart</span>
              </div>
              <div class="flex-1 h-1 bg-gray-700 mx-4 rounded-full">
                <div
                  class="h-full bg-gradient-to-r from-blue-500 to-green-500 rounded-full progress-bar"
                  style="width: 50%"
                ></div>
              </div>
              <div class="flex items-center space-x-4">
                <div
                  class="w-10 h-10 bg-green-500 rounded-full flex items-center justify-center text-white font-bold animate-pulse-slow"
                >
                  <i class="fas fa-credit-card"></i>
                </div>
                <span class="text-green-400 font-semibold">Checkout</span>
              </div>
              <div class="flex-1 h-1 bg-gray-700 mx-4 rounded-full">
                <div
                  class="h-full bg-gray-600 rounded-full progress-bar"
                  style="width: 0%"
                ></div>
              </div>
              <div class="flex items-center space-x-4">
                <div
                  class="w-10 h-10 bg-gray-600 rounded-full flex items-center justify-center text-gray-400 font-bold"
                >
                  <i class="fas fa-check"></i>
                </div>
                <span class="text-gray-400 font-semibold">Complete</span>
              </div>
            </div>
          </div>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
          <!-- Checkout Form -->
          <div class="lg:col-span-2 space-y-8">
            <!-- Billing Information -->
            <div
              class="bg-gray-800/50 backdrop-blur-sm rounded-2xl p-8 border border-gray-700/50 animate-fade-in-left card-hover"
            >
              <h2 class="text-2xl font-bold text-white mb-6 flex items-center">
                <i class="fas fa-user mr-3 text-blue-400"></i>
                Billing Information
              </h2>
              <form class="space-y-6">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                  <div>
                    <label
                      for="firstName"
                      class="block text-sm font-medium text-gray-300 mb-2"
                      >First Name</label
                    >
                    <input
                      type="text"
                      id="firstName"
                      name="firstName"
                      required
                      class="w-full p-4 rounded-xl bg-gray-700/50 text-gray-100 border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300"
                      placeholder="John"
                    />
                  </div>
                  <div>
                    <label
                      for="lastName"
                      class="block text-sm font-medium text-gray-300 mb-2"
                      >Last Name</label
                    >
                    <input
                      type="text"
                      id="lastName"
                      name="lastName"
                      required
                      class="w-full p-4 rounded-xl bg-gray-700/50 text-gray-100 border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300"
                      placeholder="Doe"
                    />
                  </div>
                </div>
                <div>
                  <label
                    for="email"
                    class="block text-sm font-medium text-gray-300 mb-2"
                    >Email Address</label
                  >
                  <input
                    type="email"
                    id="email"
                    name="email"
                    required
                    class="w-full p-4 rounded-xl bg-gray-700/50 text-gray-100 border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300"
                    placeholder="john@example.com"
                  />
                </div>
                <div>
                  <label
                    for="phone"
                    class="block text-sm font-medium text-gray-300 mb-2"
                    >Phone Number</label
                  >
                  <input
                    type="tel"
                    id="phone"
                    name="phone"
                    required
                    class="w-full p-4 rounded-xl bg-gray-700/50 text-gray-100 border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300"
                    placeholder="+1 (555) 123-4567"
                  />
                </div>
                <div>
                  <label
                    for="address"
                    class="block text-sm font-medium text-gray-300 mb-2"
                    >Street Address</label
                  >
                  <input
                    type="text"
                    id="address"
                    name="address"
                    required
                    class="w-full p-4 rounded-xl bg-gray-700/50 text-gray-100 border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300"
                    placeholder="123 Main Street"
                  />
                </div>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                  <div>
                    <label
                      for="city"
                      class="block text-sm font-medium text-gray-300 mb-2"
                      >City</label
                    >
                    <input
                      type="text"
                      id="city"
                      name="city"
                      required
                      class="w-full p-4 rounded-xl bg-gray-700/50 text-gray-100 border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300"
                      placeholder="New York"
                    />
                  </div>
                  <div>
                    <label
                      for="state"
                      class="block text-sm font-medium text-gray-300 mb-2"
                      >State</label
                    >
                    <select
                      id="state"
                      name="state"
                      required
                      class="w-full p-4 rounded-xl bg-gray-700/50 text-gray-100 border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300"
                    >
                      <option value="">Select State</option>
                      <option value="CA">California</option>
                      <option value="NY">New York</option>
                      <option value="TX">Texas</option>
                      <option value="FL">Florida</option>
                      <!-- Add more states as needed -->
                    </select>
                  </div>
                  <div>
                    <label
                      for="zipCode"
                      class="block text-sm font-medium text-gray-300 mb-2"
                      >ZIP Code</label
                    >
                    <input
                      type="text"
                      id="zipCode"
                      name="zipCode"
                      required
                      class="w-full p-4 rounded-xl bg-gray-700/50 text-gray-100 border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300"
                      placeholder="10001"
                    />
                  </div>
                </div>
              </form>
            </div>
          </div>

          <!-- Order Summary -->
          <div class="lg:col-span-1">
            <div
              class="bg-gray-800/50 backdrop-blur-sm rounded-2xl p-8 border border-gray-700/50 animate-fade-in-right sticky top-24 card-hover"
            >
              <h2 class="text-2xl font-bold text-white mb-6 flex items-center">
                <i class="fas fa-receipt mr-3 text-orange-400"></i>
                Order Summary
              </h2>

              <!-- Cart Items -->
              <div class="space-y-4 mb-6">
                <div
                  class="flex items-center space-x-4 p-4 bg-gray-700/30 rounded-xl"
                >
                  <img
                    src="https://placehold.co/64x64"
                    alt="Product"
                    class="w-16 h-16 rounded-lg object-cover"
                  />
                  <div class="flex-grow">
                    <h3 class="text-white font-semibold">
                      Wireless Headphones
                    </h3>
                    <p class="text-gray-400 text-sm">Quantity: 1</p>
                  </div>
                  <span class="text-green-400 font-bold">$129.99</span>
                </div>
                <div
                  class="flex items-center space-x-4 p-4 bg-gray-700/30 rounded-xl"
                >
                  <img
                    src="https://placehold.co/64x64"
                    alt="Product"
                    class="w-16 h-16 rounded-lg object-cover"
                  />
                  <div class="flex-grow">
                    <h3 class="text-white font-semibold">Smartphone Case</h3>
                    <p class="text-gray-400 text-sm">Quantity: 2</p>
                  </div>
                  <span class="text-green-400 font-bold">$39.98</span>
                </div>
              </div>

              <!-- Order Totals -->
              <div class="border-t border-gray-700 pt-6 space-y-3">
                <div class="flex justify-between text-gray-300">
                  <span>Subtotal:</span>
                  <span>$169.97</span>
                </div>
                <div class="flex justify-between text-gray-300">
                  <span>Shipping:</span>
                  <span>$9.99</span>
                </div>
                <div class="flex justify-between text-gray-300">
                  <span>Tax:</span>
                  <span>$17.00</span>
                </div>
                <div class="border-t border-gray-600 pt-3">
                  <div
                    class="flex justify-between text-xl font-bold text-white"
                  >
                    <span>Total:</span>
                    <span class="text-green-400">$196.96</span>
                  </div>
                </div>
              </div>

              <!-- Place Order Button -->
              <button
                type="submit"
                onclick="placeOrder()"
                class="w-full mt-8 bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white font-bold py-4 px-6 rounded-xl transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-green-500/25 text-lg"
              >
                <i class="fas fa-lock mr-2"></i>
                Place Order - $196.96
              </button>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Scripts -->
    <!-- User Scripts -->
    <script src="../assets/js/user/cart.js"></script>
    <script src="../assets/js/user/main.js"></script>
    <script>
      // Checkout-specific functionality
      document.addEventListener("DOMContentLoaded", function () {
        // Format card number
        const cardNumberInput = document.getElementById("cardNumber");
        if (cardNumberInput) {
          cardNumberInput.addEventListener("input", function (e) {
            let value = e.target.value
              .replace(/\s+/g, "")
              .replace(/[^0-9]/gi, "");
            let formattedValue = value.match(/.{1,4}/g)?.join(" ") || value;
            e.target.value = formattedValue;
          });
        }

        // Format expiry date
        const expiryInput = document.getElementById("expiryDate");
        if (expiryInput) {
          expiryInput.addEventListener("input", function (e) {
            let value = e.target.value.replace(/\D/g, "");
            if (value.length >= 2) {
              value = value.substring(0, 2) + "/" + value.substring(2, 4);
            }
            e.target.value = value;
          });
        }

        // CVV numeric only
        const cvvInput = document.getElementById("cvv");
        if (cvvInput) {
          cvvInput.addEventListener("input", function (e) {
            e.target.value = e.target.value.replace(/\D/g, "");
          });
        }

        // Payment method selection
        document
          .querySelectorAll('input[name="paymentMethod"]')
          .forEach((radio) => {
            radio.addEventListener("change", function () {
              // Remove active class from all
              document
                .querySelectorAll(".payment-method div")
                .forEach((div) => {
                  div.classList.remove("border-blue-500", "bg-blue-500/20");
                  div.classList.add("border-gray-600");
                });

              // Add active class to selected
              if (this.checked) {
                const div = this.nextElementSibling;
                div.classList.remove("border-gray-600");
                div.classList.add("border-blue-500", "bg-blue-500/20");
              }

              // Show/hide card details
              const cardDetails = document.getElementById("cardDetails");
              if (this.value === "card") {
                cardDetails.style.display = "block";
              } else {
                cardDetails.style.display = "none";
              }
            });
          });

        // Set initial payment method
        const initialPayment = document.querySelector(
          'input[name="paymentMethod"]:checked'
        );
        if (initialPayment) {
          initialPayment.dispatchEvent(new Event("change"));
        }
      });

      // Place order function
      function placeOrder() {
        // Show loading state
        const button = event.target;
        const originalText = button.innerHTML;
        button.innerHTML =
          '<i class="fas fa-spinner fa-spin mr-2"></i>Processing...';
        button.disabled = true;

        // Simulate order processing
        setTimeout(() => {
          showToast("success", "Order placed successfully!");
          // Redirect to success page or order confirmation
          setTimeout(() => {
            window.location.href = "../user/order.html";
          }, 2000);
        }, 3000);
      }
    </script>
  </body>
</html>
